<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <h1>Customer List</h1>
        <h:form >
                <h:panelGroup id="messagePanel" layout="block">
                    <h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
                </h:panelGroup>
 
<!--the Filter -->           
           <h:panelGrid columns="3">
                    <h:outputLabel value="Filter by state" for="selectState" />
<h:selectOneMenu id="selectState" label="selectedState" value="#{custController.stateFilter}">
                    <f:selectItem itemLabel="All states" itemValue="all"/>
                    <f:selectItem itemLabel="Florida" itemValue="FL"  />
                    <f:selectItem itemLabel="California" itemValue="CA"/>
                    <f:selectItem itemLabel="Texas" itemValue="TX"/>
                    <f:selectItem itemLabel="NewYork" itemValue="NY"/>
 <f:selectItem itemLabel="Mississippi" itemValue="MI"/>
                    <f:selectItem itemLabel="Georgia" itemValue="GA"/>
                </h:selectOneMenu>

 <!--the Filterâ€™s command button calling updateItems() to update the datatable based on the selected state -->           
<h:commandButton value="apply filter" action="#{custController.updateItems()}"/>              
</h:panelGrid>    

<!-- checking there is data to display -->           
<h:outputText escape="false" value="No customers were found" rendered="#{custController.items.rowCount == 0}"/>
               
<h:panelGroup rendered="#{custController.items.rowCount > 0}">
<!-- the data table of customer details, create from the items object -->           
<h:dataTable value="#{custController.items}" var="item" border="0" cellpadding="2" cellspacing="0" rules="all" style="border:solid 1px">
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Customer ID"/>
                            </f:facet>
                            <h:outputText value="#{item.customerId}"/>
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Name"/>
                            </f:facet>
                            <h:outputText value="#{item.name}"/>
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="City"/>
                            </f:facet>
                            <h:outputText value="#{item.city}"/>
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="State"/>
                            </f:facet>
                            <h:outputText value="#{item.state}"/>
                        </h:column>
</h:dataTable>
                </h:panelGroup>
</h:form>

    </h:body>
</html>

